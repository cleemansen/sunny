<html>
<head>
  <title>sunny</title>
  <meta name="author" content="unividuell">
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <!--Load the AJAX API-->
  <script type="text/javascript" src="https://www.google.com/jsapi"></script>
  <!-- Load the suncalc lib-->
  <script type="text/javascript" src="js/suncalc.js"></script>
  <style type="text/css">
  html {font-family: monospace;}
  .mark {background-color: #CC6F05; color: #c0ffee; text-decoration: none; padding: 0 4px;}
  </style>

  <script type="text/javascript">
// Load the Visualization API and the piechart package.
google.load('visualization', '1.1', {'packages':['corechart']});

// Set a callback to run when the Google Visualization API is loaded.
//google.setOnLoadCallback(drawChart);
google.setOnLoadCallback(demo);

function diff(diff) {
  // millisec / sec / minute
  // * 100 / 100 -> x,yy
  return Math.round((diff/1000/60/60) * 100) / 100;
}

function demo() {

  // kn 
  var lat = 47.662369;
  var lng = 9.17322315;
  // year
  var year = 2014;
  // date
  var myDate = new Date(year, 0, 1, 12);

  // Create and populate the data table.
  var data = new google.visualization.DataTable();

  // Add columns
  data.addColumn('date', 'Day');
  // ordering this way because of areaOpacity.
  data.addColumn('timeofday', 'midnight');
  data.addColumn('timeofday', 'sunset');
  data.addColumn('timeofday', 'sunrise');

  // color
  var night = '#282729';
  var sunshine = '#CC6F05';

  var maxThisYear = new Date(year+1, 0, 1);
  for (var cnt = 0; myDate.getTime() <= maxThisYear.getTime(); cnt = cnt+1) {

    var crtDate = new Date(myDate);
    // get today's sunlight times
    var times = SunCalc.getTimes(crtDate, lat, lng);

    // data - raw
    data.addRow();
    data.setCell(cnt, 0, crtDate);
    data.setCell(cnt, 3, [times.sunrise.getHours(), times.sunrise.getMinutes(), times.sunrise.getSeconds()]);
    data.setCell(cnt, 2, [times.sunset.getHours(), times.sunset.getMinutes(), times.sunset.getSeconds()]);
    data.setCell(cnt, 1, [23, 59, 59]);

    myDate.setDate(myDate.getDate()+1);
  }
  
  var options = {
                  title:'Sunny',
                  width:'100%',
                  height:450,
                  vAxis: {ticks: [[0, 0, 0], [6, 0, 0], [8, 0, 0], [10, 0, 0], [16, 0, 0], [18, 0, 0], [20, 0, 0], [23, 59, 59]]},
                  hAxis: {ticks: [new Date(year, 0, 1)]},
                  chartArea: {left: 50, top: 50, width: '95%', height: '65%'},
                  legend: { position: "none" },
                  fontName: 'monospace',
                  titlePosition: 'none',
                  series: {
                    0:{color: night, areaOpacity: 0.4},   // after sunset
                    1:{color: sunshine, areaOpacity: 0.6},// sunshine
                    2:{color: night, areaOpacity: 0.4}    // before sunrise
                  },
                  selectionMode: 'multiple',
                };

  // Create and draw the visualization.
  var chart = new google.visualization.AreaChart(document.getElementById('chart_div'));

  chart.draw(data, options);
}

  </script>
</head>
<body>
  <h1>sunny 5000 <span class="mark">☀☀☀☀☀</span></h1>
  <h3>h of (possible) <span class="mark">sunshine</span> during <span class="mark">2014</span></span> in <span class="mark">kn</span> [47.662369, 9.17322315]</h3>
  <div>
    <div id="chart_div"></div>
  </div>
  <div id="sunny"></div>
  <p style="text-align: right;">this is a <b>quick & dirty</b> production of <a class="mark" href="http://unividuell.org">unividuell</a>; 
  credits to <a style="color: #CC6F05; text-decoration: none;" href="https://github.com/mourner/suncalc">suncalc</a>!</p>
</body>
</html>
